name: Run Jscrambler

on:
  workflow_call:
    inputs:
      jscrambler-access-key:
        required: true
        type: string
      jscrambler-secret-key:
        required: true
        type: string
      jscrambler-application-id:
        required: true
        type: string

jobs:
  jscrambler:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install Jscrambler
        run: npm install jscrambler@6.2.6
      - name: Run Jscrambler
        run: ./node_modules/.bin/jscrambler -c jscrambler-final.json
        env:
          JSCRAMBLER_ACCESS_KEY: ${{ inputs.jscrambler-access-key }}
          JSCRAMBLER_SECRET_KEY: ${{ inputs.jscrambler-secret-key }}
          JSCRAMBLER_APPLICATION_ID: ${{ inputs.jscrambler-application-id }}